var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}(function(){var _window$BlockChainUti=window.BlockChainUtils,myStorage=_window$BlockChainUti.myStorage,getCoinShowName=_window$BlockChainUti.getCoinShowName,getScript=_window$BlockChainUti.getScript,colorMap=_window$BlockChainUti.colorMap;var _window=window,emitter=_window.emitter,location=_window.location,fetchData=_window.fetchData;var MarketExtend=function(){function MarketExtend(){_classCallCheck(this,MarketExtend)}_createClass(MarketExtend,[{key:'sortIcon',value:function sortIcon(v,sortValue,sortSell){var str='#icon-a_17';if(v===sortValue){if(sortSell){str='#icon-a_17_1'}else{str='#icon-a_17_2'}}return str}},{key:'initScroll',value:function initScroll(){var _this=this;if(window.IScroll){this.scroll=new window.IScroll(this.$homeTbody,{scrollbars:true,mouseWheel:true});this.$homeTbody.querySelector('.iScrollIndicator').style.background=colorMap['a-2-bg']}else{getScript(window.staticDomain+'/home/static/js/scroll.js').then(function(){_this.scroll=new window.IScroll(_this.$homeTbody,{scrollbars:true,mouseWheel:true});_this.$homeTbody.querySelector('.iScrollIndicator').style.background=colorMap['a-2-bg']})}}},{key:'dataLength',value:function dataLength(tableData){var len=0;tableData.forEach(function(item){if(tableData.length>1){len+=1}item.data.forEach(function(){len+=1})});return len}},{key:'tableHeight',value:function tableHeight(dataLength){var h=300;var spk=30;if(dataLength>5&&dataLength<spk){h=56*dataLength}else if(dataLength>=spk){h=56*spk}return h}},{key:'createHotTableHead',value:function createHotTableHead(){var html='';this.hotColumns.forEach(function(item,index){var icon='';html+='<li class="td-item td-item'+(index+1)+'">\n                                  <span data-index="'+index+'">\n                                    '+item.title+'\n                                    '+icon+'\n                                  </span>\n                            </li>'});this.$homeThead.innerHTML=html;this.bindTitleEvent()}},{key:'createTableHead',value:function createTableHead(){var _this2=this;var html='';this.columns.forEach(function(item,index){var icon='';var className='thead-label';var cl='';if(_this2.lxg){cl='item'+index}if(item.sortable){className='thead-label sortable';icon='<svg aria-hidden="true" class="icon icon-14">\n                                      <use xlink href="'+_this2.sortIcon(item.key,'sort',false)+'"></use>\n                                    </svg>'}html+='<li class='+cl+'>\n                                  <span class="'+className+'" data-index="'+index+'">\n                                    '+item.title+'\n                                    '+icon+'\n                                  </span>\n                            </li>'});this.$homeThead.innerHTML=html;this.bindTitleEvent()}},{key:'createMarketTitle',value:function createMarketTitle(dataList,coinList){var _this3=this;var html='';html+='<li class="c-8-bd" data-market="myMarket">\n                         '+this.locale.marketSet+'\n                        </li>';dataList.forEach(function(item){var className='';if(_this3.marketCurrent===item){className=_this3.hoverClass+' selected'}html+='<li class="'+className+'" data-market="'+item+'">\n                            '+getCoinShowName(item,coinList)+'\n                            </li>'});this.$marketTitle.innerHTML=html}},{key:'switchMarket',value:function switchMarket(data){if(this.createIng)return;this.listfilter=null;this.marketCurrent=data;this.createIng=true;if(data!=='myMarket'){myStorage.set('homeMarkTitle',data)}emitter.emit('SWITCH-MARKET',data)}},{key:'overHandler',value:function overHandler(target){var cl='f-1-cl c-3-bg';if(this.tableListOverClass){cl=this.tableListOverClass}var liBorder='c-5-bd';if(typeof this.liBorder==='string'){liBorder=this.liBorder}target.className='home-tbody-li '+liBorder+' '+cl}},{key:'outHandler',value:function outHandler($list){var _this4=this;var liBorder='c-5-bd';if(typeof this.liBorder==='string'){liBorder=this.liBorder}var liColor='f-1-cl';if(typeof this.liColor==='string'){liColor=this.liColor}$list.forEach(function(item){item.className='home-tbody-li '+liBorder+' '+liColor+' '+(_this4.tableBg?_this4.tableBg:'')})}},{key:'setMyMarket',value:function setMyMarket(symbol){var _this5=this;var url='/fe-ex-api/common/update_optional_symbol';if(this.optional_symbol_server_open===1){url='/fe-ex-api/optional/update_symbol'}if(!this.setMyMarketSwitch)return;this.setMyMarketSwitch=false;var mySymbol=myStorage.get('mySymbol')||[];var addOrDelete=true;if(mySymbol.length&&mySymbol.indexOf(symbol)>-1){mySymbol=mySymbol.filter(function(item){return item!==symbol});addOrDelete=false}else{mySymbol.push(symbol);addOrDelete=true}if(this.optional_symbol_server_open===1&&window.isLogin){fetchData({url:url,method:'post',params:{operationType:addOrDelete===true?'1':'2',symbols:symbol}}).then(function(data){if(data.code==='0'){_this5.setMyMarketSwitch=true;_this5.mySymbolList=mySymbol;myStorage.set('mySymbol',mySymbol)}else{emitter.emit('tip',{text:data.msg,type:'error'})}})}else{this.setMyMarketSwitch=true;this.mySymbolList=mySymbol;myStorage.set('mySymbol',mySymbol)}}},{key:'changeIcon',value:function changeIcon(iconHtml){if(iconHtml.indexOf('c_11_1')>-1){return'<svg class="icon icon-16" aria-hidden="true">\n                            <use xlink:href="#icon-c_11">\n                          </use></svg>'}return'<svg class="icon icon-16" aria-hidden="true">\n                            <use xlink:href="#icon-c_11_1">\n                          </use></svg>'}},{key:'switchMarketIcon',value:function switchMarketIcon(choice){var icon='<svg class="icon icon-16" aria-hidden="true">\n                            <use xlink:href="#icon-c_11">\n                          </use></svg>';if(choice){icon='<svg class="icon icon-16" aria-hidden="true">\n                            <use xlink:href="#icon-c_11_1">\n                          </use></svg>'}return icon}},{key:'marketIconClick',value:function marketIconClick(target){var realcoin=target.dataset.realcoin;target.innerHTML=this.changeIcon(target.innerHTML);this.setMyMarket(realcoin);emitter.emit('SWITCH-STORE',realcoin)}},{key:'unBindTableListEvent',value:function unBindTableListEvent(){var _this6=this;var $list=Array.prototype.slice.call(this.$homeTbody.querySelectorAll('.home-tbody-li'));var $markeIcon=Array.prototype.slice.call(this.$homeTbody.querySelectorAll('.marketIcon'));var $evenSymbols=Array.prototype.slice.call(this.$homeTbody.querySelectorAll('.evenSymbol'));$list.forEach(function(target){target.removeEventListener('mouseover',_this6.overHandler,false);target.removeEventListener('mouseout',_this6.outHandler,false)});$evenSymbols.forEach(function(target){target.removeEventListener('click',_this6.everySymbolClick,false)});$markeIcon.forEach(function(target){target.removeEventListener('click',_this6.marketIconClick,false)});if(this.$lxgTitle){var filList=Array.prototype.slice.call(this.$lxgTitle.querySelectorAll('.fil'));filList.forEach(function(item){item.removeEventListener('click',_this6.lxgFil,false)})}}},{key:'lxgFil',value:function lxgFil(filList,e){var target=e.target;var id=target.dataset.id;filList.forEach(function(i){i.classList.remove('active')});target.classList.add('active');if(window.isNaN(Number(id))){this.filId=id;this.marketCurrent='';this.createHotTableHead();this.createHotTable();this.$homeTbody.style.overflowY='hidden';this.$homeTbody.style.borderBottom='none'}else{this.$homeTbody.style.overflowY='scroll';this.$homeTbody.style.borderBottom='1px solid #e2e9ef';this.filId=Number(id);this.createTable(this.tableDataList)}}},{key:'everySymbolClick',value:function everySymbolClick(target){var etfOpen=target.dataset.etfOpen;var data=target.dataset.id;myStorage.set('sSymbolName',data);if(etfOpen){myStorage.set('markTitle','ETF')}else{myStorage.set('markTitle',data.split('/')[1])}location.href='/trade'}},{key:'bindTableListEvent',value:function bindTableListEvent(){var _this7=this;var $list=Array.prototype.slice.call(this.$homeTbody.querySelectorAll('.home-tbody-li'));var $markeIcon=Array.prototype.slice.call(this.$homeTbody.querySelectorAll('.marketIcon'));var $evenSymbols=Array.prototype.slice.call(this.$homeTbody.querySelectorAll('.evenSymbol'));if(this.$lxgTitle){var filList=Array.prototype.slice.call(this.$lxgTitle.querySelectorAll('.fil'));filList.forEach(function(item){item.addEventListener('click',_this7.lxgFil.bind(_this7,filList),false)})}$evenSymbols.forEach(function(target){target.addEventListener('click',_this7.everySymbolClick.bind(_this7,target),false)});$markeIcon.forEach(function(target){target.addEventListener('click',_this7.marketIconClick.bind(_this7,target),false)});$list.forEach(function(target){target.addEventListener('mouseover',_this7.overHandler.bind(_this7,target),false);target.addEventListener('mouseout',_this7.outHandler.bind(_this7,$list),false)})}},{key:'sort',value:function sort(v){if(this.createIng)return;if(!v.sortable)return;if(this.sortValue!==v.key){this.sortValue=v.key;this.sortSell=true}else{this.sortSell=!this.sortSell}}},{key:'changeSortableIcon',value:function changeSortableIcon(target){var $use=target.querySelector('use');var href=$use.getAttribute('href');Array.prototype.slice.call(this.$homeThead.querySelectorAll('.sortable')).forEach(function(item){item.querySelector('use').setAttribute('href','#icon-a_17')});if(href.indexOf('a_17_2')>-1){$use.setAttribute('href','#icon-a_17_1')}else{$use.setAttribute('href','#icon-a_17_2')}}},{key:'bindTitleEvent',value:function bindTitleEvent(){var _this8=this;Array.prototype.slice.call(this.$homeThead.querySelectorAll('.sortable')).forEach(function(item){item.addEventListener('click',function(){_this8.sort(_this8.columns[item.dataset.index]);_this8.changeSortableIcon(item);emitter.emit('SWITCH-MARKET',myStorage.get('homeMarkTitle'))},false)})}},{key:'bindEvent',value:function bindEvent(){var _this9=this;if(this.$searchInput){this.$searchInput.addEventListener('input',function(e){var target=e.target;var val=target.value;var data=_this9.marketDataList_bar;var isSearch=false;if(val){isSearch=true}_this9.listfilter=val;_this9.resloveData(data,isSearch);_this9.tableDataList=_this9.tableData();_this9.rebuild=true;_this9.firstLoad=true;_this9.createIng=true;_this9.createTable(_this9.tableDataList)},false)}if(this.$marketTitle){this.$marketTitle.addEventListener('click',function(e){var target=e.target;var currentMarket=target.dataset.market;Array.prototype.slice.call(_this9.$marketTitle.querySelectorAll('li')).forEach(function(item){item.className=''});target.className=_this9.hoverClass+' selected';_this9.switchMarket(currentMarket)},false)}}},{key:'init',value:function init(data){var _this10=this;this.market=data.market.market;this.symbolAll=data.symbolAll;this.coinList=data.market.coinList;if(this.$marketTitle){this.createMarketTitle(data.market.marketSort,data.market.coinList)}this.createTableHead();this.bindEvent();emitter.on('login',function(){_this10.isLogin=window.isLogin})}},{key:'createTable',value:function createTable(dataList){var _this11=this;var myMarkets=myStorage.get('mySymbol')||[];var html='';this.tableTreeData={};this.tableTree={};var dataLen=Object.keys(dataList).length;var lxgTitle='';var liBorder='c-5-bd';if(typeof this.liBorder==='string'){liBorder=this.liBorder}var liColor='f-1-cl';if(typeof this.liColor==='string'){liColor=this.liColor}if(dataLen){this.$homeNodata.style.display='none'}dataList.forEach(function(data,index){if(_this11.filId!==index&&_this11.filId!=='hot'&&_this11.lxg){return}var childHtml='';data.data.forEach(function(item){if(_this11.lxg){if(_this11.filId==='hot'){if(!_this11.headerMap[item.id]){return}}}var evenSymbol=item.id;if(!_this11.tableTreeData[evenSymbol]){_this11.tableTreeData[evenSymbol]={};_this11.tableTree[evenSymbol]={}}_this11.tableTreeData[evenSymbol].marketIcon=item.data[0][0].iconSvg;_this11.tableTreeData[evenSymbol].price=item.data[1][0].text;_this11.tableTreeData[evenSymbol].subPrice=item.data[1][0].subContent.text;_this11.tableTreeData[evenSymbol].amount=item.data[2][0].text;_this11.tableTreeData[evenSymbol].amountClass=item.data[2][0].classes;_this11.tableTreeData[evenSymbol].highest=item.data[3][0].text;_this11.tableTreeData[evenSymbol].lowest=item.data[4][0].text;_this11.tableTreeData[evenSymbol].deal=item.data[5][0].text;_this11.tableTreeData[evenSymbol].volume=item.data[6][0].text;var echarts='';var evenSymbolHtml='<div class="even">\n                                    <span class="marketIcon" data-coin="'+evenSymbol+'">'+item.data[0][0].iconSvg+'</span>\n                                    <span class="evenSymbol" data-id="'+item.id+'" data-eftOpen="'+item.etfOpen+'">'+item.data[0][1].iconSvg+'</span>\n                                            '+(item.etfOpen&&_this11.marketCurrent!=='ETF'?'<span class="eft-class u-8-bd u-8-cl">ETF</span>':'')+'\n                                </div>';if(_this11.lxg){var img='';if(_this11.symbolIcon(item)){img='<img src="'+_this11.symbolIcon(item)+'" alt="">'}evenSymbolHtml='<div class="even item0">\n                    <span class="marketIcon" data-coin="'+evenSymbol+'" data-realCoin="'+item.id+'">'+_this11.switchMarketIcon(myMarkets.indexOf(item.id)>-1)+'</span>\n                    <span class="symbol-icon">'+img+'</span>\n                    <span class="evenSymbol" data-id="'+item.id+'">'+_this11.syyshowName(item.showName)+'</span>\n                    </div>';echarts='<div class="even item3">\n                    <div>\n                        <div class="echart-box" style="height: 25px; -webkit-tap-highlight-color: transparent; user-select: none;"></div>\n                    </div>\n                    </div>'}childHtml+='<li class="home-tbody-li '+liBorder+' '+liColor+' '+_this11.tableBg+'" data-coin="'+evenSymbol+'" data-realCoin="'+item.id+'">\n                                        <!-- \u5E01\u5BF9 -->\n                                                '+evenSymbolHtml+'\n                                        <!-- \u6700\u65B0\u4EF7 -->\n                                        <div class="even newPrice item1">\n                                            <p class="price">'+item.data[1][0].text+'</p>\n                                            <p class="b-2-cl subPrice">'+item.data[1][0].subContent.text+'</p>\n                                        </div>\n                                        <!-- \u6DA8\u8DCC\u5E45 -->\n                                        <div class="even item2">\n                                            <div class="amount '+item.data[2][0].classes.join(' ')+'">'+item.data[2][0].text+'</div>\n                                        </div>\n                                        '+echarts+'\n                                        <div class="even highest item4">'+item.data[3][0].text+'</div>\n                                        <div class="even lowest item5">'+item.data[4][0].text+'</div>\n                                        <div class="even deal item6">'+item.data[5][0].text+'</div>\n                                        <div class="even volume item7">'+item.data[6][0].text+'</div>\n                                    </li>'});if(dataLen>1){if(_this11.lxg){html+='<div class="home-tbody" data-coin="'+data.title+'">\n                                 <div>\n                                            <ul class="home-tbody-list">'+childHtml+'</ul>\n                                 </div>\n                             </div>'}else{html+='<div class="home-tbody" data-coin="'+data.title+'">\n                                 <div>\n                                     <div class="home-tbody-title c-5-bd '+(_this11.titleBg?_this11.titleBg:'')+'">\n                                         <span class="lable c-5-bd">'+data.title+'</span>\n                                     </div>\n                                     <ul class="home-tbody-list">'+childHtml+'</ul>\n                                 </div>\n                             </div>'}}else{html+='<div class="home-tbody" data-coin="'+data.title+'">\n                                 <div>\n                                     <ul class="home-tbody-list">'+childHtml+'</ul>\n                                 </div>\n                             </div>'}});dataList.forEach(function(data,index){var act=index===_this11.filId?'active':'';lxgTitle+='<span class="fil tab '+act+'" data-id="'+index+'">'+data.title+'</span>'});this.$lxgTitle.innerHTML='<span class="tab fil" data-id="hot">'+this.locale.hot+'</span>'+lxgTitle+'<a class="checkAll-btn" href="/trade">'+this.locale.all+'</a>';this.$homeTbody.innerHTML='<div class="scroll-warper">'+html+'</div>';var lis=Array.prototype.slice.call(this.$homeTbody.querySelectorAll('.home-tbody-li'));lis.forEach(function(item){var coin=item.dataset.coin;_this11.tableTree[coin].price=item.querySelector('.price');_this11.tableTree[coin].subPrice=item.querySelector('.subPrice');_this11.tableTree[coin].amount=item.querySelector('.amount');_this11.tableTree[coin].highest=item.querySelector('.highest');_this11.tableTree[coin].lowest=item.querySelector('.lowest');_this11.tableTree[coin].deal=item.querySelector('.deal');_this11.tableTree[coin].volume=item.querySelector('.volume');_this11.tableTree[coin].marketIcon=item.querySelector('.marketIcon');_this11.tableTree[coin].echarts=item.querySelector('.echart-box');_this11.initEcharts(coin)});var len=this.dataLength(dataList);var height=this.tableHeight(len);this.$homeLoading.style.display='none';if(!dataList.length){this.$homeNodata.style.display='block'}else{this.$homeTbody.style.display='block'}this.createIng=false;this.rebuild=false;this.bindTableListEvent();if(this.isScroll&&lis.length>20){this.initScroll(this.$homeTbody.querySelector('.scroll-warper'))}else if(window.IScroll){this.scroll.destroy()}}},{key:'symbolIcon',value:function symbolIcon(data){var coin=data.id.split('/')[0];var iconImg=this.coinList[coin]?this.coinList[coin].icon:'';return iconImg}},{key:'syyshowName',value:function syyshowName(data){var ar=data.split('/');return ar[0]+' <i>/ '+ar[1]+'</i>'}},{key:'dataSort',value:function dataSort(v){var _this12=this;if(this.sortValue.length){return v.sort(function(a,b){var first=a;var end=b;if(_this12.sortSell){first=b;end=a}switch(_this12.sortValue){case'roses':return(parseFloat(first.data[2][0].sortVal)||0)-(parseFloat(end.data[2][0].sortVal)||0);case'closes':return(parseFloat(first.data[1][0].sortVal)||0)-(parseFloat(end.data[1][0].sortVal)||0);default:return(parseFloat(first.data[0][1].sortVal)||0)-(parseFloat(end.data[0][1].sortVal)||0);}})}return v}},{key:'tableData',value:function tableData(){var _this13=this;var arr=[];var result=[];if(this.halveAreaData.length){var data=this.dataSort(this.halveAreaData);arr.push({title:this.locale.halving,titleIndex:0,data:data})}if(this.MainAreaData.length){var _data=this.dataSort(this.MainAreaData);arr.push({title:this.locale.maincon,data:_data})}if(this.CreateAreaData.length){var _data2=this.dataSort(this.CreateAreaData);arr.push({title:this.locale.newcon,data:_data2})}if(this.SeeAreaData.length){var _data3=this.dataSort(this.SeeAreaData);arr.push({title:this.locale.seecon,data:_data3})}if(this.unsealAreaData.length){var _data4=this.dataSort(this.unsealAreaData);arr.push({title:this.locale.unseal,data:_data4})}arr.forEach(function(el){var item=el;var data=el.data.filter(function(e){return e.isShow||_this13.listfilter||_this13.marketCurrent==='myMarket'});if(data.length){item.data=data;var newItem=item;item.data.forEach(function(citem,index){newItem.data[index].etfOpen=_this13.symbolAll[citem.id].etfOpen});result.push(newItem)}});return result}},{key:'filterArea',value:function filterArea(){var _this14=this;var MainAreaFilter=[];var CreateAreaFilter=[];var SeeAreaFilter=[];var hideAreaFilter=[];var unsealAreaFilter=[];var halveAreaFilter=[];Object.keys(this.market).forEach(function(item){Object.keys(_this14.market[item]).forEach(function(citem){var _market$item$citem=_this14.market[item][citem],newcoinFlag=_market$item$citem.newcoinFlag,name=_market$item$citem.name;if(_this14.coinList[name.split('/')[0]]&&_this14.coinList[name.split('/')[0]].isOvercharge&&_this14.coinList[name.split('/')[0]].isOvercharge.toString()==='1'){unsealAreaFilter.push(citem)}else if(newcoinFlag===1){CreateAreaFilter.push(citem)}else if(newcoinFlag===2){SeeAreaFilter.push(citem)}else if(newcoinFlag===0){MainAreaFilter.push(citem)}else if(newcoinFlag===3){halveAreaFilter.push(citem)}})});this.MainAreaFilter=MainAreaFilter;this.CreateAreaFilter=CreateAreaFilter;this.SeeAreaFilter=SeeAreaFilter;this.hideAreaFilter=hideAreaFilter;this.unsealAreaFilter=unsealAreaFilter;this.halveAreaFilter=halveAreaFilter}},{key:'setData',value:function setData(val){var _this15=this;var isSearch=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var MainArea=[];var CreateArea=[];var SeeArea=[];var hideArea=[];var unsealArea=[];var halveArea=[];val.forEach(function(item){if(_this15.MainAreaFilter.indexOf(item.id)!==-1){MainArea.push(item)}if(_this15.CreateAreaFilter.indexOf(item.id)!==-1){CreateArea.push(item)}if(_this15.SeeAreaFilter.indexOf(item.id)!==-1){SeeArea.push(item)}if(_this15.hideAreaFilter.indexOf(item.id)!==-1){hideArea.push(item)}if(_this15.unsealAreaFilter.indexOf(item.id)!==-1&&!isSearch){unsealArea.push(item)}if(_this15.halveAreaFilter.indexOf(item.id)!==-1){halveArea.push(item)}});this.MainAreaData=MainArea;this.CreateAreaData=CreateArea;this.SeeAreaData=SeeArea;this.hideAreaData=hideArea;this.unsealAreaData=unsealArea;this.halveAreaData=halveArea}},{key:'resloveData',value:function resloveData(val,isSearch){this.marketDataList_bar=val;var data=val;if(this.listfilter){var reg=new RegExp(this.listfilter,'gim');data=this.marketDataList_bar.filter(function(item){return item.showName.match(reg)})}this.setData(data,isSearch)}},{key:'renderAllkeyLine',value:function renderAllkeyLine(coin){if(this.tableTree[coin]){this.initEcharts(coin)}}},{key:'initEcharts',value:function initEcharts(coin){var color=this.klineColor;var bg=null;this.myEcharts[coin]=window.echarts.init(this.tableTree[coin].echarts);this.myEcharts[coin].setOption({grid:{left:-10,bottom:0,top:0,right:-10},xAxis:{show:false,type:'category',min:'dataMin',max:'dataMax'},yAxis:{show:false,type:'value',min:'dataMin',max:'dataMax'},series:[{data:[],type:'line',symbol:'none',lineStyle:{normal:{color:color,width:2}},areaStyle:bg}]});this.setKLineData(coin)}},{key:'setKLineData',value:function setKLineData(coin){var coinC=coin.replace('-c','');var color=this.klineColor;if(this.myEcharts[coin]){this.myEcharts[coin].resize();this.myEcharts[coin].setOption({series:[{data:this.allKeyLine[coinC],type:'line',lineStyle:{normal:{color:color,width:this.lineWidth}}}]})}}},{key:'createHotTable',value:function createHotTable(){var _this16=this;var keys=Object.keys(this.recommendData);var html='';this.tableTreeData={};this.tableTree={};var dataLen=keys.length;var lxgTitle='';var liBorder='c-5-bd';if(typeof this.liBorder==='string'){liBorder=this.liBorder}var liColor='f-1-cl';if(typeof this.liColor==='string'){liColor=this.liColor}if(dataLen){this.$homeNodata.style.display='none'}var childHtml='';keys.forEach(function(item,index){var data=_this16.recommendData[item];if(!Object.keys(data).length){return}var evenSymbol=item;if(!_this16.tableTreeData[evenSymbol]){_this16.tableTreeData[evenSymbol]={};_this16.tableTree[evenSymbol]={}}_this16.tableTreeData[evenSymbol].price=data.close.data;_this16.tableTreeData[evenSymbol].amount=data.rose.data;_this16.tableTreeData[evenSymbol].amountClass=data.rose.class;_this16.tableTreeData[evenSymbol].highest=data.high;_this16.tableTreeData[evenSymbol].lowest=data.low;_this16.tableTreeData[evenSymbol].deal=data.vol;_this16.tableTreeData[evenSymbol].volume=data.amount;var img='';if(_this16.symbolIcon({id:item})){img='<img src='+_this16.symbolIcon({id:item})+' alt="">'}childHtml+='<li class="home-tbody-li '+liBorder+' '+liColor+' '+_this16.tableBg+'" data-coin="'+evenSymbol+'">\n                                        <!-- \u5E01\u5BF9 -->\n                                        <div class="even td-item1">\n                                        '+(index+1)+'\n                                        </div>\n                                        <div class="even td-item2" style="width:180px!important;text-align: left!important;padding:0!important;padding-left: 10px!important;">\n                                             <span class="symbol-icon" style="margin-right: 16px">\n                                            '+img+'\n                                          </span>\n                                          <span class="b-cion">'+_this16.setSymbol(data.symbol.symbol,'q')+'</span>\n                                          /\n                                            <span class="q-cion">'+_this16.setSymbol(data.symbol.unit,'b')+'</span>\n                                        </div>\n                                        <!-- \u6700\u65B0\u4EF7 -->\n                                        <div class="even newPrice td-item3">\n                                            '+data.close.data+'\n                                        </div>\n                                        <!-- \u6DA8\u8DCC\u5E45 -->\n                                        <div class="even td-item4">\n                                            <div class="amount '+data.rose.class+'">'+data.rose.data+'</div>\n                                        </div>\n                                       <div class="even td-item-kline">\n                                        <div>\n                                            <div class="echart-box" style="height: 25px; -webkit-tap-highlight-color: transparent; user-select: none;"></div>\n                                        </div>\n                                      </div>\n                                        <div class="even highest td-item5">'+data.high+'</div>\n                                        <div class="even lowest td-item6">'+data.low+'</div>\n                                        <div class="even deal td-item7">'+data.vol+'</div>\n                                        <div class="even volume td-item8">'+data.amount+'</div>\n                                    </li>'});html+='<div class="home-tbody" data-coin="\u70ED\u95E8\u63A8\u8350">\n                                 <div>\n                                            <ul class="home-tbody-list">'+childHtml+'</ul>\n                                 </div>\n                             </div>';this.tableDataList.forEach(function(data,index){var act='';lxgTitle+='<span class="fil tab '+act+'" data-id="'+index+'">'+data.title+'</span>'});this.$lxgTitle.innerHTML='<span class="tab fil active" data-id="hot">'+this.locale.hot+'</span>'+lxgTitle+'<a class="checkAll-btn" href="/trade">'+this.locale.all+'</a>';this.$homeTbody.innerHTML='<div class="scroll-warper">'+html+'</div>';var lis=Array.prototype.slice.call(this.$homeTbody.querySelectorAll('.home-tbody-li'));lis.forEach(function(item){var coin=item.dataset.coin;_this16.tableTree[coin].price=item.querySelector('.newPrice');_this16.tableTree[coin].subPrice=item.querySelector('.subPrice');_this16.tableTree[coin].amount=item.querySelector('.amount');_this16.tableTree[coin].highest=item.querySelector('.highest');_this16.tableTree[coin].lowest=item.querySelector('.lowest');_this16.tableTree[coin].deal=item.querySelector('.deal');_this16.tableTree[coin].volume=item.querySelector('.volume');_this16.tableTree[coin].marketIcon=item.querySelector('.marketIcon');_this16.tableTree[coin].echarts=item.querySelector('.echart-box');_this16.initEcharts(coin)});this.$homeLoading.style.display='none';if(!keys.length){this.$homeNodata.style.display='block'}else{this.$homeTbody.style.display='block'}this.$homeLoading.style.display='none';this.createIng=false;this.rebuild=false;this.bindTableListEvent()}},{key:'setSymbol',value:function setSymbol(data){var showData=getCoinShowName(data,this.coinList);return showData}},{key:'changeHotTable',value:function changeHotTable(dataList){var _this17=this;var keys=Object.keys(dataList);keys.forEach(function(item){var data=dataList[item];var evenSymbol=data.name;if(_this17.tableTreeData[evenSymbol]){if(_this17.tableTreeData[evenSymbol].price!==data.close.data){_this17.tableTree[evenSymbol].price.innerHTML=data.close.data;_this17.tableTreeData[evenSymbol].price=data.close.data}if(_this17.tableTreeData[evenSymbol].amount!==data.rose.data){_this17.tableTree[evenSymbol].amount.innerHTML=data.rose.data;_this17.tableTreeData[evenSymbol].amount=data.rose.data}if(_this17.tableTreeData[evenSymbol].amountClass!==data.rose.class){_this17.tableTree[evenSymbol].amount.className='amount '+data.rose.class;_this17.tableTreeData[evenSymbol].amountClass=data.rose.class}if(_this17.tableTreeData[evenSymbol].highest!==data.high){_this17.tableTree[evenSymbol].highest.innerHTML=data.high;_this17.tableTreeData[evenSymbol].highest=data.high}if(_this17.tableTreeData[evenSymbol].lowest!==data.low){_this17.tableTree[evenSymbol].lowest.innerHTML=data.low;_this17.tableTreeData[evenSymbol].lowest=data.low}if(_this17.tableTreeData[evenSymbol].deal!==data.vol){_this17.tableTree[evenSymbol].deal.innerHTML=data.vol;_this17.tableTreeData[evenSymbol].deal=data.vol}if(_this17.tableTreeData[evenSymbol].volume!==data.amount){_this17.tableTree[evenSymbol].volume.innerHTML=data.amount;_this17.tableTreeData[evenSymbol].volume=data.amount}}})}},{key:'changeTable',value:function changeTable(dataList){var _this18=this;if(this.filId==='hot'){return}dataList.forEach(function(data){data.data.forEach(function(item){var evenSymbol=item.data[0][1].iconSvg.match(/>(.+)</)[1];if(_this18.tableTreeData[evenSymbol]){if(_this18.tableTreeData[evenSymbol].marketIcon!==item.data[0][0].iconSvg){_this18.tableTree[evenSymbol].marketIcon.innerHTML=item.data[0][0].iconSvg;_this18.tableTreeData[evenSymbol].marketIcon=item.data[0][0].iconSvg}if(_this18.tableTreeData[evenSymbol].price!==item.data[1][0].text){_this18.tableTree[evenSymbol].price.innerHTML=item.data[1][0].text;_this18.tableTreeData[evenSymbol].price=item.data[1][0].text}if(_this18.tableTreeData[evenSymbol].subPrice!==item.data[1][0].subContent.text){_this18.tableTree[evenSymbol].subPrice.innerHTML=item.data[1][0].subContent.text;_this18.tableTreeData[evenSymbol].subPrice=item.data[1][0].subContent.text}if(_this18.tableTreeData[evenSymbol].amount!==item.data[2][0].text){_this18.tableTree[evenSymbol].amount.innerHTML=item.data[2][0].text;_this18.tableTreeData[evenSymbol].amount=item.data[2][0].text}if(_this18.tableTreeData[evenSymbol].amountClass!==item.data[2][0].classes){_this18.tableTree[evenSymbol].amount.className='amount '+item.data[2][0].classes.join(' ');_this18.tableTreeData[evenSymbol].amountClass=item.data[2][0].classes}if(_this18.tableTreeData[evenSymbol].highest!==item.data[3][0].text){_this18.tableTree[evenSymbol].highest.innerHTML=item.data[3][0].text;_this18.tableTreeData[evenSymbol].highest=item.data[3][0].text}if(_this18.tableTreeData[evenSymbol].lowest!==item.data[4][0].text){_this18.tableTree[evenSymbol].lowest.innerHTML=item.data[4][0].text;_this18.tableTreeData[evenSymbol].lowest=item.data[4][0].text}if(_this18.tableTreeData[evenSymbol].deal!==item.data[5][0].text){_this18.tableTree[evenSymbol].deal.innerHTML=item.data[5][0].text;_this18.tableTreeData[evenSymbol].deal=item.data[5][0].text}if(_this18.tableTreeData[evenSymbol].volume!==item.data[6][0].text){_this18.tableTree[evenSymbol].volume.innerHTML=item.data[6][0].text;_this18.tableTreeData[evenSymbol].volume=item.data[6][0].text}}})})}},{key:'initTable',value:function initTable(data){this.unBindTableListEvent();this.filterArea();this.resloveData(data);this.tableDataList=this.tableData();if(!this.firstLoad||this.rebuild){this.$homeTbody.style.display='none';this.$homeLoading.style.display='block';this.firstLoad=true;this.createIng=true;this.createTable(this.tableDataList)}else if(!this.createIng&&!this.rebuild){this.changeTable(this.tableDataList)}}}]);return MarketExtend}();window.MarketExtend=MarketExtend})();