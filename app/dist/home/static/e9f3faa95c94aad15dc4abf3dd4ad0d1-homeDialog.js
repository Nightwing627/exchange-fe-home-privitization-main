var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}(function(){var _window=window,fetchData=_window.fetchData;var _window$BlockChainUti=window.BlockChainUtils,getCookie=_window$BlockChainUti.getCookie,setCookie=_window$BlockChainUti.setCookie;var HomeDialog=function(){function HomeDialog(){_classCallCheck(this,HomeDialog);this.dialogType='text';this.showFlag=false;this.titleText='';this.oneText='';this.oneLink='';this.twoText='';this.twoLink='';this.htmlText='';this.haveTwo=false;this.haveOption=false;this.imgUrl='';this.imgLink='';this.nowId='';this.init()}_createClass(HomeDialog,[{key:'init',value:function init(){var _this=this;fetchData({url:'/fe-ex-api/homepage_Elastic_Layer',method:'post',params:{terminalType:'0'}}).then(function(data){if(!Number(data.code)&&data.data){var _data$data=data.data,activityTitle=_data$data.activityTitle,startTime=_data$data.startTime,endTime=_data$data.endTime,displayType=_data$data.displayType,picturePath=_data$data.picturePath,pictureUrl=_data$data.pictureUrl,imageText=_data$data.imageText,buttonWritingOne=_data$data.buttonWritingOne,buttonWritingTwo=_data$data.buttonWritingTwo,buttonUrlOne=_data$data.buttonUrlOne,buttonUrlTwo=_data$data.buttonUrlTwo,id=_data$data.id,mtime=_data$data.mtime,isLogin=_data$data.isLogin;_this.dialogType=displayType.toString()==='0'?'img':'text';_this.titleText=activityTitle;if(_this.dialogType==='img'){if(picturePath&&picturePath.length){_this.imgUrl=picturePath}if(pictureUrl&&pictureUrl.length){_this.imgLink=pictureUrl}}else{if(imageText&&imageText.length){_this.htmlText=imageText}if(buttonWritingOne&&buttonWritingOne.length){_this.oneText=buttonWritingOne;_this.haveOption=true}if(buttonUrlOne&&buttonUrlOne.length){_this.oneLink=buttonUrlOne}if(buttonWritingTwo&&buttonWritingTwo.length){_this.twoText=buttonWritingTwo;_this.haveTwo=true;_this.haveOption=true}if(buttonUrlTwo&&buttonUrlTwo.length){_this.twoLink=buttonUrlTwo}}var flag=false;_this.nowId=id+'-'+mtime;var cookieArr=getCookie('homeAlertArr')?JSON.parse(getCookie('homeAlertArr')):[];var cookieFlag=false;if(cookieArr.indexOf(_this.nowId)===-1){cookieFlag=true}if(window.isLogin&&isLogin){flag=true}if(!Number(isLogin)){flag=true}var time=new Date().getTime();if(time>startTime&&time<endTime&&flag&&cookieFlag){_this.showFlag=true}if(_this.showFlag){_this.createDialog();_this.createStyle();_this.createEvent()}}})}},{key:'setCookieArr',value:function setCookieArr(){var cookieArr=getCookie('homeAlertArr')?JSON.parse(getCookie('homeAlertArr')):[];cookieArr.push(this.nowId);setCookie('homeAlertArr',JSON.stringify(cookieArr))}},{key:'createEvent',value:function createEvent(){var _this2=this;if(this.dialogImg){this.dialogImg.addEventListener('click',function(){if(_this2.imgLink){window.location.href=_this2.imgLink}else{_this2.closeDialog();_this2.setCookieArr()}},false)}if(this.dialogClose){this.dialogClose.addEventListener('click',function(){_this2.closeDialog();_this2.setCookieArr()},false)}if(this.oneBtn){this.oneBtn.addEventListener('click',function(){if(_this2.oneLink){window.location.href=_this2.oneLink}else{_this2.closeDialog();_this2.setCookieArr()}},false)}if(this.towBtn){this.towBtn.addEventListener('click',function(){if(_this2.twoLink){window.location.href=_this2.twoLink}else{_this2.closeDialog();_this2.setCookieArr()}},false)}}},{key:'closeDialog',value:function closeDialog(){this.homeDialog.style.display='none'}},{key:'createDialog',value:function createDialog(){this.homeDialog=document.createElement('section');this.homeDialog.className='common-homeDialog';var containerHtml='';if(this.dialogType==='text'){containerHtml=' <div>\n                        <div class="dialog-frame-head a-4-bg">\n                          <span class="dialog-frame-head-text b-1-cl">'+this.titleText+'</span>\n                          <span class="dialog-frame-head-close">\n                          <section class="common-iconButton">\n                           <div class="iconButton-icon">\n                             <svg aria-hidden="true" class="icon icon-16">\n                             <use xlink:href="#icon-c_7"></use>\n                             </svg>\n                           </div>\n                           <div class="iconButton-bg"></div>\n                          </section>\n                          </span>\n                        </div>\n                        <div class="dialog-frame-body">\n                          <section>'+this.htmlText+'</section>\n                        </div>\n                        <div class="dialog-frame-bottom a-4-bg" v-if="haveOption">\n                          <div\n                            class="dialog-frame-options"\n                            :class="!haveTwo ? \'dialog-frame-options-oneBtn\' : \'\'"\n                          >\n                           <button class="common-button closeBtnClass common-button-text u-8-cl towBtn"\n                           style="height: 40px; padding-left: 31px; padding-right: 31px; margin-top: 0px;"\n                           ><div class="common-button-slot">'+this.twoText+'</div>\n                            <div class=\'solidBc bghover u-9-bg\'></div>\n                            <div class=\'solidBc bgactive u-10-bg\'></div>\n                           </button>\n                          <button class="common-button common-button-solid u-8-bg u-16-cl oneBtn"\n                           style="height: 40px; padding-left: 31px; padding-right: 31px; margin-top: 0px;"\n                           ><div class="common-button-slot">'+this.oneText+'</div>\n                           <div class=\'solidBc bghover u-14-bg\'></div>\n                            <div class=\'solidBc bgactive u-15-bg\'></div>\n                           </button>\n                          </div>\n                        </div>\n                      </div>'}else{containerHtml=' <div class="dialog-imgBox">\n                        <span class="dialog-imgBox-close">\n                            <section class="common-iconButton">\n                           <div class="iconButton-icon">\n                             <svg aria-hidden="true" class="icon icon-16">\n                             <use xlink:href="#icon-c_7"></use>\n                             </svg>\n                           </div>\n                           <div class="iconButton-bg"></div>\n                          </section>\n                        </span>\n                        <img style="width: 100%; display: block" src="'+this.imgUrl+'" alt class="diaolog-img"/>\n                      </div>'}var html='<div class="dialog-markAll u-7-bg"></div>\n                      <div class="dialog-frame a-5-bg">\n                        '+containerHtml+'\n                    </div>';this.homeDialog.innerHTML=html;document.body.appendChild(this.homeDialog);this.dialogImg=this.homeDialog.querySelector('.diaolog-img');this.dialogClose=this.homeDialog.querySelector('.common-iconButton');this.oneBtn=this.homeDialog.querySelector('.oneBtn');this.towBtn=this.homeDialog.querySelector('.towBtn')}},{key:'createStyle',value:function createStyle(){var css='.drop-enter-active {\n                  animation: drop-in 0.3s;\n                }\n                .drop-leave-active {\n                  animation: drop-in 0.3s reverse;\n                }\n                .common-homeDialog .btnClass {\n                  margin-right: 10px;\n                }\n                .common-homeDialog .dialog-imgBox {\n                  min-height: 200px;\n                  max-height: 600px;\n                  overflow-y: scroll;\n                  position: relative;\n                  border-radius: 4px;\n                }\n                .common-homeDialog .dialog-imgBox-close {\n                  right: 20px;\n                  cursor: pointer;\n                  font-size: 20px;\n                  top: 12px;\n                  position: absolute;\n                }\n                .common-homeDialog .dialog-markAll {\n                  position: fixed;\n                  width: 100%;\n                  height: 100%;\n                  z-index: 999;\n                  top: 0;\n                  left: 0;\n                }\n                .common-homeDialog .dialog-frame {\n                  transform: 0.3s transition;\n                  position: fixed;\n                  z-index: 1000;\n                  left: 50%;\n                  top: 50%;\n                  transform: translate3d(-50%, -50%, 0);\n                  width: 800px;\n                  border-radius: 2px;\n                }\n                .common-homeDialog .dialog-frame-head {\n                  box-sizing: border-box;\n                  height: 60px;\n                  width: 100%;\n                  padding: 0 30px;\n                  line-height: 60px;\n                }\n                .common-homeDialog .dialog-frame-head-text {\n                  font-size: 16px;\n                }\n                .common-homeDialog .dialog-frame-head-close {\n                  float: right;\n                  cursor: pointer;\n                  font-size: 20px;\n                  margin-top: 12px;\n                }\n                .common-homeDialog .dialog-frame-body {\n                  width: 740px;\n                  min-height: 200px;\n                  max-height: 440px;\n                  overflow-y: scroll;\n                  margin-left: 30px;\n                  box-sizing: border-box;\n                  padding: 30px 0;\n                }\n                .common-homeDialog .closeBtnClass {\n                  font-size: 14px;\n                  margin-right: 10px;\n                }\n                .common-homeDialog .dialog-frame-bottom {\n                  height: 100px;\n                  position: relative;\n                }\n                .common-homeDialog .dialog-frame-bottom .dialog-frame-options {\n                  position: absolute;\n                  right: 30px;\n                  top: 30px;\n                }\n                .common-homeDialog .dialog-frame-bottom .dialog-frame-options-oneBtn {\n                  right: 50%;\n                  transform: translateX(50%);\n                }\n                @-moz-keyframes drop-in {\n                  0% {\n                    top: 35%;\n                    opacity: 0.7;\n                  }\n                  100% {\n                /* margin-top: 10px; */\n                    opacity: 1;\n                  }\n                }\n                @-webkit-keyframes drop-in {\n                  0% {\n                    top: 35%;\n                    opacity: 0.7;\n                  }\n                  100% {\n                /* margin-top: 10px; */\n                    opacity: 1;\n                  }\n                }\n                @-o-keyframes drop-in {\n                  0% {\n                    top: 35%;\n                    opacity: 0.7;\n                  }\n                  100% {\n                /* margin-top: 10px; */\n                    opacity: 1;\n                  }\n                }\n                @keyframes drop-in {\n                  0% {\n                    top: 35%;\n                    opacity: 0.7;\n                  }\n                  100% {\n                /* margin-top: 10px; */\n                    opacity: 1;\n                  }\n                }\n                ';var style=document.createElement('style');style.innerHTML=css;document.querySelector('head').appendChild(style)}}]);return HomeDialog}();window.HomeDialog=HomeDialog})();